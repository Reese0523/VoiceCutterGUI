version: 1.0.{build}
image: Visual Studio 2022

install:
  - python -m pip install --upgrade pip
  - pip install nuitka moviepy whisper tqdm numpy imageio_ffmpeg

build_script:
  - python -m nuitka ^
      --standalone ^
      --onefile ^
      --windows-console-mode=disable ^
      --enable-plugin=tk-inter ^
      --include-package=moviepy ^
      --include-package=whisper ^
      --include-package=imageio_ffmpeg ^
      --assume-yes-for-downloads ^      # <— 这一行加上
      voice_cutter_gui.py
  - powershell -Command "Compress-Archive -Path '.\\voice_cutter_gui.exe' -DestinationPath '.\\VoiceCutterGUI.zip'"

artifacts:
  - path: VoiceCutterGUI.zip
    name: VoiceCutterGUI
